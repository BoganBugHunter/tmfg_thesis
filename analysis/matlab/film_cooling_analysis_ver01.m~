clear variables;
close all;


%finding the plenum total pressure from a given mass flow rate fraction

gamma = 1.4;

R = 287.058; %[Joules/(kg.K)]

p_w = 101325;

coolant_ratio = 0.008;

T_0C = 300;

m_dot_main = 120;

m_dot_coolant = m_dot_main*coolant_ratio;

plenum_area = 7.4993e-4;

A = 2*(gamma-1)/gamma;
B = p_w^((gamma-1)/gamma);
C = (1-gamma)/gamma;
D = m_dot_coolant^2/( plenum_area^2*p_w^(2/gamma)*( 2*gamma/(R*T_0C*(gamma-1)) ) );

%iteratively solve for the plenum total pressure

size = 100;

%array to store and plot the convergence for both possible methods
array = zeros(size,2);

%initial guess
p_0c1 = p_w;
p_0c2 = p_w;

for i = 1:size
   p_0c1 = ( D/( 1 - B*p_0c1^C ) )^(1/A);
   array(i,1) = p_0c1;
   p_0c2 = ( (1/B)*( 1 - D/(p_0c2^A) ) )^(1/C);
   array(i,2)
end



figure(1)
plot(array)
hold on


